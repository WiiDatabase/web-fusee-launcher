<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>WebFG</title>

    <style>
        body {
            font-family: sans-serif;
        }

        .red {
            color: red;
        }

        .hidden {
            display: none;
        }
    </style>
</head>

<body>
<h1>Web Fus√©e Launcher</h1>
<p>Fusee Launcher ported to JavaScript using WebUSB.</p>

<noscript class="red">
    <h2>YOU NEED TO ENABLE JAVASCRIPT FOR THIS TO WORK!</h2>
</noscript>

<div id="windows-warning" class="red hidden">
    <h2><u>THIS DOES NOT WORK ON WINDOWS!</u></h2>
</div>

<h3>Payload:</h3>
<div>
    <form id="mainForm">
        <p>
            <input type="radio" name="payload" id="uploaded" value="uploaded" checked>
            <label for="uploaded">Upload payload:</label>
            <input type="file" id="payloadUpload" accept=".bin">
        </p>

        <p>
            <input type="radio" name="payload" id="fusee.bin" value="fusee.bin">
            <label for="fusee.bin">Example payload (fusee.bin)</label>
        </p>

        <button id="goButton" type="submit">Do it!</button>
    </form>

</div>

<h3>Result:</h3>
<textarea cols="80" rows="12" id="output"></textarea>

<p>
<h4>Instructions:</h4>
<ol>
    <li>Put the Switch in RCM, and connect it to your device.</li>
    <li>Select either the example payload, or upload one.</li>
    <li>Submit the form</li>
    <li>On the consent screen that appears, select 'APX' and hit confirm.</li>
    <li>If all goes well, the payload will launch!</li>
</ol>
</p>

<p>
<h4>Random stuff:</h4>
<ul>
    <li>This is pretty poorly tested. I just kind wrote it and whatever. I'm not responsible if anything goes wrong!
    </li>
    <li>This does <strong>NOT work on Windows</strong> due to a limitation in the Chrome implementation of WebUSB (and
        probably other
        reasons!)
    </li>
    <li>This does <strong>ONLY work on browsers that support <a href="https://caniuse.com/webusb">WebUSB</a></strong>.
    </li>
    <li>On Linux, you might get an access denied error!
        If you do, you can try creating a file at <code>/etc/udev/rules.d/50-switch.rules</code>
        <div>With the following contents:</div>
        <div><code>SUBSYSTEM=="usb", ATTR{idVendor}=="0955", MODE="0664", GROUP="plugdev"</code></div>
    </li>
    <li>This has been tested and appears to work on Linux, macOS, Android (not rooted) and Chromebooks. Your mileage may
        vary.
    </li>
</ul>
</p>

<p>
    <small>
        Source can be found on <a href="https://github.com/WiiDatabase/web-fusee-launcher">GitHub</a> (or by hitting
        view source, there is no backend!). Modified by WiiDatabase.de, original by <a
            href="https://github.com/atlas44/web-fusee-launcher">atlas44</a>.
    </small>
</p>

<script src="./fusee.bin.js"></script>
<script src="./main.js"></script>
</body>

</html>
